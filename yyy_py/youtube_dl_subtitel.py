#!/usr/bin/env python3.8
# text=subprocess.run(["ls", "-l"], capture_output=True).stdout
s_debug = str(
    b'[youtube] bejBnKJGr10: Downloading webpage\n[youtube] bejBnKJGr10: Downloading video info webpage\n[youtube] bejBnKJGr10: Looking for automatic captions\n[youtube] bejBnKJGr10: Downloading MPD manifest\nAvailable automatic captions for bejBnKJGr10:\nLanguage formats\ngu       vtt, ttml, srv3, srv2, srv1\nzh-Hans  vtt, ttml, srv3, srv2, srv1\nzh-Hant  vtt, ttml, srv3, srv2, srv1\ngd       vtt, ttml, srv3, srv2, srv1\nga       vtt, ttml, srv3, srv2, srv1\ngl       vtt, ttml, srv3, srv2, srv1\nlb       vtt, ttml, srv3, srv2, srv1\nla       vtt, ttml, srv3, srv2, srv1\nlo       vtt, ttml, srv3, srv2, srv1\ntr       vtt, ttml, srv3, srv2, srv1\nlv       vtt, ttml, srv3, srv2, srv1\nlt       vtt, ttml, srv3, srv2, srv1\nth       vtt, ttml, srv3, srv2, srv1\ntg       vtt, ttml, srv3, srv2, srv1\nte       vtt, ttml, srv3, srv2, srv1\nfil      vtt, ttml, srv3, srv2, srv1\nhaw      vtt, ttml, srv3, srv2, srv1\nyi       vtt, ttml, srv3, srv2, srv1\nceb      vtt, ttml, srv3, srv2, srv1\nyo       vtt, ttml, srv3, srv2, srv1\nde       vtt, ttml, srv3, srv2, srv1\nda       vtt, ttml, srv3, srv2, srv1\nel       vtt, ttml, srv3, srv2, srv1\neo       vtt, ttml, srv3, srv2, srv1\nen       vtt, ttml, srv3, srv2, srv1\neu       vtt, ttml, srv3, srv2, srv1\net       vtt, ttml, srv3, srv2, srv1\nes       vtt, ttml, srv3, srv2, srv1\nru       vtt, ttml, srv3, srv2, srv1\nro       vtt, ttml, srv3, srv2, srv1\nbn       vtt, ttml, srv3, srv2, srv1\nbe       vtt, ttml, srv3, srv2, srv1\nbg       vtt, ttml, srv3, srv2, srv1\nuk       vtt, ttml, srv3, srv2, srv1\njv       vtt, ttml, srv3, srv2, srv1\nbs       vtt, ttml, srv3, srv2, srv1\nja       vtt, ttml, srv3, srv2, srv1\nxh       vtt, ttml, srv3, srv2, srv1\nco       vtt, ttml, srv3, srv2, srv1\nca       vtt, ttml, srv3, srv2, srv1\ncy       vtt, ttml, srv3, srv2, srv1\ncs       vtt, ttml, srv3, srv2, srv1\nps       vtt, ttml, srv3, srv2, srv1\npt       vtt, ttml, srv3, srv2, srv1\npa       vtt, ttml, srv3, srv2, srv1\nvi       vtt, ttml, srv3, srv2, srv1\npl       vtt, ttml, srv3, srv2, srv1\nhy       vtt, ttml, srv3, srv2, srv1\nhr       vtt, ttml, srv3, srv2, srv1\nht       vtt, ttml, srv3, srv2, srv1\nhu       vtt, ttml, srv3, srv2, srv1\nhmn      vtt, ttml, srv3, srv2, srv1\nhi       vtt, ttml, srv3, srv2, srv1\nha       vtt, ttml, srv3, srv2, srv1\nmg       vtt, ttml, srv3, srv2, srv1\nuz       vtt, ttml, srv3, srv2, srv1\nml       vtt, ttml, srv3, srv2, srv1\nmn       vtt, ttml, srv3, srv2, srv1\nmi       vtt, ttml, srv3, srv2, srv1\nmk       vtt, ttml, srv3, srv2, srv1\nur       vtt, ttml, srv3, srv2, srv1\nmt       vtt, ttml, srv3, srv2, srv1\nms       vtt, ttml, srv3, srv2, srv1\nmr       vtt, ttml, srv3, srv2, srv1\nta       vtt, ttml, srv3, srv2, srv1\nmy       vtt, ttml, srv3, srv2, srv1\naf       vtt, ttml, srv3, srv2, srv1\nsw       vtt, ttml, srv3, srv2, srv1\nis       vtt, ttml, srv3, srv2, srv1\nam       vtt, ttml, srv3, srv2, srv1\nit       vtt, ttml, srv3, srv2, srv1\niw       vtt, ttml, srv3, srv2, srv1\nsv       vtt, ttml, srv3, srv2, srv1\nar       vtt, ttml, srv3, srv2, srv1\nsu       vtt, ttml, srv3, srv2, srv1\nzu       vtt, ttml, srv3, srv2, srv1\naz       vtt, ttml, srv3, srv2, srv1\nid       vtt, ttml, srv3, srv2, srv1\nig       vtt, ttml, srv3, srv2, srv1\nnl       vtt, ttml, srv3, srv2, srv1\nno       vtt, ttml, srv3, srv2, srv1\nne       vtt, ttml, srv3, srv2, srv1\nny       vtt, ttml, srv3, srv2, srv1\nfr       vtt, ttml, srv3, srv2, srv1\nku       vtt, ttml, srv3, srv2, srv1\nfy       vtt, ttml, srv3, srv2, srv1\nfa       vtt, ttml, srv3, srv2, srv1\nfi       vtt, ttml, srv3, srv2, srv1\nka       vtt, ttml, srv3, srv2, srv1\nkk       vtt, ttml, srv3, srv2, srv1\nsr       vtt, ttml, srv3, srv2, srv1\nsq       vtt, ttml, srv3, srv2, srv1\nko       vtt, ttml, srv3, srv2, srv1\nkn       vtt, ttml, srv3, srv2, srv1\nkm       vtt, ttml, srv3, srv2, srv1\nst       vtt, ttml, srv3, srv2, srv1\nsk       vtt, ttml, srv3, srv2, srv1\nsi       vtt, ttml, srv3, srv2, srv1\nso       vtt, ttml, srv3, srv2, srv1\nsn       vtt, ttml, srv3, srv2, srv1\nsm       vtt, ttml, srv3, srv2, srv1\nsl       vtt, ttml, srv3, srv2, srv1\nky       vtt, ttml, srv3, srv2, srv1\nsd       vtt, ttml, srv3, srv2, srv1\nAvailable subtitles for bejBnKJGr10:\nLanguage formats\npt-BR    vtt, ttml, srv3, srv2, srv1\n')

y = "/usr/local/software/youtube-dl_neueste_Version/youtube-dl"
y_args = ["--all-subs", "--embed-subs", "--add-metadata", "--write-auto-sub", "--ignore-errors", "-R", "2", "--download-archive",
          "/home/v/Sicherung/Ton Film/youtube-dl_download-archive", "-o",
          "%(channel)s %(playlist_title)s/%(playlist_index)s %(title)s%(id)s.%(ext)s"]


def youtube_dl_subtitel(extra_parameter_und_url):
    """
    param1 param2 ... url
    """
    uu=extra_parameter_und_url
    from subprocess import run
    import re
    s = str(run([y, "--list-subs", uu[-1]], shell=False, capture_output=True).stdout)
    p = r'\\nAvailable subtitles for .*:\\nLanguage formats\\npt'
    b = re.search(pattern=p, string=s, flags=re.MULTILINE | re.DOTALL)
    if b:
        print(b.group(0))
        run([y, *y_args, *uu], shell=False)
    else:
        print('keine Subtitel')


if __name__ == "__main__":
    from fire import Fire
    Fire()

# Gebrauch:
# Scriptname yt url
